[gd_scene load_steps=13 format=3 uid="uid://dm2nw0x63kv2s"]

[ext_resource type="Texture2D" uid="uid://c2or66lfs3xlb" path="res://animation/player.png" id="1_04584"]

[sub_resource type="GDScript" id="GDScript_4q06s"]
script/source = "extends CharacterBody2D


const SPEED = 300.0
const JUMP_VELOCITY = -400.0
const ACCELERATION = 600.0 
const FRICTION = 1000.0

# Get the gravity from the project settings to be synced with RigidBody nodes.
var gravity = ProjectSettings.get_setting(\"physics/2d/default_gravity\")


func _physics_process(delta):
	# Add the gravity.
	apply_gravity(delta)
	handle_jump()
	handle_xaxis_movement(delta)
	move_and_slide()
	
func apply_gravity(delta):
	# abstract it away for the gravity side  
	if not is_on_floor():
		velocity.y += gravity * delta
		
func handle_jump():
	# if its on the floor then player can jump normally 
	# if not the they can't half jump on release. 
	if is_on_floor():
		if Input.is_action_just_pressed(\"jump\"):
			velocity.y += JUMP_VELOCITY
	else:
		%AnimatedSprite2D.play(\"jump\")
		if Input.is_action_just_released(\"jump\") and velocity.y < JUMP_VELOCITY/2:
			velocity.y = JUMP_VELOCITY/2 
			
func handle_xaxis_movement(delta):
	# identify if moving left or right is being pressed 
	# apply velocity along with friction, using the move towards fucntion
	var xaxis_movement = Input.get_axis(\"move_left\",\"move_right\")
	if xaxis_movement:
		%AnimatedSprite2D.flip_h = (xaxis_movement < 0)		
		%AnimatedSprite2D.play(\"run\")
		velocity.x = move_toward(velocity.x, SPEED * xaxis_movement , ACCELERATION * delta)
	else:
		%AnimatedSprite2D.play(\"idle\")
		velocity.x = move_toward(velocity.x, 0 , FRICTION * delta)
"

[sub_resource type="AtlasTexture" id="AtlasTexture_c5tbm"]
atlas = ExtResource("1_04584")
region = Rect2(0, 0, 24, 20)

[sub_resource type="AtlasTexture" id="AtlasTexture_kaiq0"]
atlas = ExtResource("1_04584")
region = Rect2(144, 0, 24, 20)

[sub_resource type="AtlasTexture" id="AtlasTexture_4ye0f"]
atlas = ExtResource("1_04584")
region = Rect2(24, 0, 24, 20)

[sub_resource type="AtlasTexture" id="AtlasTexture_6d2hc"]
atlas = ExtResource("1_04584")
region = Rect2(48, 0, 24, 20)

[sub_resource type="AtlasTexture" id="AtlasTexture_leryl"]
atlas = ExtResource("1_04584")
region = Rect2(72, 0, 24, 20)

[sub_resource type="AtlasTexture" id="AtlasTexture_xhome"]
atlas = ExtResource("1_04584")
region = Rect2(96, 0, 24, 20)

[sub_resource type="AtlasTexture" id="AtlasTexture_j6eta"]
atlas = ExtResource("1_04584")
region = Rect2(120, 0, 24, 20)

[sub_resource type="AtlasTexture" id="AtlasTexture_jct2w"]
atlas = ExtResource("1_04584")
region = Rect2(0, 0, 24, 20)

[sub_resource type="SpriteFrames" id="SpriteFrames_kd5a8"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_c5tbm")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_kaiq0")
}],
"loop": true,
"name": &"jump",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4ye0f")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6d2hc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_leryl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xhome")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j6eta")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jct2w")
}],
"loop": true,
"name": &"run",
"speed": 10.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_iwdwy"]
size = Vector2(14, 17)

[node name="CharacterBody2D" type="CharacterBody2D"]
script = SubResource("GDScript_4q06s")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
unique_name_in_owner = true
position = Vector2(0, -9)
sprite_frames = SubResource("SpriteFrames_kd5a8")
animation = &"jump"
frame_progress = 0.713378

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -8)
shape = SubResource("RectangleShape2D_iwdwy")
